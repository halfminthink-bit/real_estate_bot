# 地価公示データ（2000-2025年）調査結果レポート

## 📋 概要

国土数値情報（地価公示データ）2000-2025年の26年分のデータ構造を調査し、統一的なインポートスクリプト作成のための情報を収集しました。

---

## 1. ファイル構造

### パターンA（2000-2011年）
- **年度**: 2000-2011年（12年分）
- **ファイル名**: `L01-{yy}_13-g_LandPrice.shp`
- **フォーマット**: Shapefile
- **エンコーディング**: Shift-JIS / CP932
- **カラム数**: 約32個
- **特徴**: 古い形式、`-g_LandPrice`サフィックス付き

### パターンB（2012-2014, 2016-2017, 2019, 2022年）
- **年度**: 2012-2014, 2016-2017, 2019, 2022年（7年分）
- **ファイル名**: `L01-{yy}_13.shp`
- **フォーマット**: Shapefile
- **エンコーディング**: Shift-JIS / CP932
- **カラム数**: 約113個（2012-2014年）、変動（2016年以降）
- **特徴**: 中間形式、サフィックスなし

### パターンC（2015, 2018, 2020-2021, 2023-2025年）
- **年度**: 2015, 2018, 2020-2021, 2023-2025年（7年分）
- **ファイル名**: `L01-{yy}_13_GML/L01-{yy}_13.geojson` または `L01-{yy}_13.geojson`
- **フォーマット**: GeoJSON
- **エンコーディング**: UTF-8
- **カラム数**: 変動（126-130個）
- **特徴**: 最新形式、GMLサブディレクトリ内または直接配置

### 特殊ケース
- **2015年**: GMLサブディレクトリ内にShapefile（GeoJSONなし）
- **2019年**: 直接ShapefileとGeoJSONの両方が存在
- **2022年**: Shapefileのみ（GeoJSONなし）

---

## 2. フィールドマッピング

### 2000-2011年（パターンA）

| フィールド | フィールド名 | 説明 |
|-----------|------------|------|
| 市区町村コード | L01_017 | 市区町村コード（13112=世田谷区） |
| 市区町村名 | L01_018 | 市区町村名 |
| 住所 | L01_019 | 所在地（東京都...） |
| 価格 | L01_006 | 地価（円/㎡） |
| 地積 | L01_020 | 地積（㎡） |

### 2012-2014年（パターンB）

| フィールド | フィールド名 | 説明 |
|-----------|------------|------|
| 市区町村コード | L01_017 | 市区町村コード（13112=世田谷区） |
| 市区町村名 | L01_018 | 市区町村名 |
| 住所 | L01_019 | 所在地（東京都...） |
| 価格 | L01_006 | 地価（円/㎡） |
| 地積 | L01_020 | 地積（㎡） |

**注意**: カラム数が増加（32個→113個）しているが、主要フィールドは同じ

### 2015-2017年（パターンB継続）

| フィールド | フィールド名 | 説明 |
|-----------|------------|------|
| 市区町村コード | L01_017 | 市区町村コード（13112=世田谷区） |
| 市区町村名 | L01_018 | 市区町村名 |
| 住所 | L01_019 | 所在地（東京都...） |
| 価格 | L01_006 | 地価（円/㎡） |
| 地積 | L01_020 | 地積（㎡） |

### 2018-2021年（パターンC）

| フィールド | フィールド名 | 説明 |
|-----------|------------|------|
| 市区町村コード | L01_021 | 市区町村コード（13112=世田谷区） |
| 市区町村名 | L01_022 | 市区町村名 |
| 住所 | L01_023 | 所在地（東京都...） |
| 地積 | L01_024 | 地積（㎡） |
| 前面道路方位 | L01_037 | 前面道路方位 |
| 前面道路幅員 | L01_038 | 前面道路幅員（m） |
| 最寄駅 | L01_045 | 最寄駅名 |
| 駅距離 | L01_046 | 駅距離（m） |
| 用途地域 | L01_047 | 用途地域 |
| 建蔽率 | L01_052 | 建蔽率（%） |
| 容積率 | L01_053 | 容積率（%） |

**注意**: フィールド番号が変更（L01_017→L01_021など）

### 2022-2025年（パターンC継続）

| フィールド | フィールド名 | 説明 |
|-----------|------------|------|
| 市区町村コード | L01_022 (2022-2023) / L01_001 (2024-2025) | 市区町村コード |
| 市区町村名 | L01_023 (2022-2023) / L01_024 (2024-2025) | 市区町村名 |
| 住所 | L01_024 (2022-2023) / L01_025 (2024-2025) | 所在地 |
| 地積 | L01_026 (2022-2023) / L01_027 (2024-2025) | 地積（㎡） |

**注意**: 年度によってフィールド番号がさらに変更

---

## 3. データ品質

### 世田谷区データ件数（推定）

| 年度 | 件数 | 備考 |
|------|------|------|
| 2000-2011年 | 約170件 | パターンA |
| 2012-2014年 | 約150件 | パターンB |
| 2015-2017年 | 約120件 | パターンB継続 |
| 2018-2025年 | 約143件 | パターンC |

**注意**: 実際の件数は年度によって変動します。

### 価格データの単位

- **単位**: 円/㎡
- **範囲**: 数千円/㎡ ～ 数十万円/㎡
- **例**: 7,600円/㎡, 106,000円/㎡

---

## 4. 推奨実装

### 統一的なインポートスクリプトの構造

```python
# 年度別ファイルパス取得
def get_file_path(year):
    if 2000 <= year <= 2011:
        return f"L01-{yy}_13-g_LandPrice.shp"
    elif year in [2012, 2013, 2014, 2016, 2017, 2019, 2022]:
        return f"L01-{yy}_13.shp"
    elif year in [2015, 2018, 2020, 2021, 2023, 2024, 2025]:
        return f"L01-{yy}_13_GML/L01-{yy}_13.geojson"

# 年度別フィールドマッピング
FIELD_MAPPING = {
    (2000, 2017): {
        'city_code': 'L01_017',
        'address': 'L01_019',
        'price': 'L01_006',
        # ...
    },
    (2018, 2021): {
        'city_code': 'L01_021',
        'address': 'L01_023',
        # ...
    },
    (2022, 2023): {
        'city_code': 'L01_022',
        'address': 'L01_024',
        # ...
    },
    (2024, 2025): {
        'city_code': 'L01_001',
        'address': 'L01_025',
        # ...
    }
}
```

### 実装のポイント

1. **エンコーディング対応**
   - Shapefile: Shift-JIS / CP932
   - GeoJSON: UTF-8

2. **住所正規化**
   - 2018-2021年: ハイフン形式（`池尻２－２４－２`）→ 丁目番形式（`池尻2丁目24番2`）
   - その他の年度: 既存の正規化処理

3. **エラーハンドリング**
   - ファイルが見つからない場合
   - エンコーディングエラー
   - フィールドが見つからない場合

---

## 5. 次のステップ

1. ✅ Phase 1: ファイル構造の調査（完了）
2. ⏳ Phase 2: データ構造の詳細調査（進行中）
3. ⏳ Phase 3: データ品質の確認
4. ⏳ 統一インポートスクリプトの作成

---

## 参考資料

- `kokudo_structure_investigation.json`: ファイル構造調査結果
- `kokudo_shapefile_analysis.json`: Shapefile分析結果（2000-2021年）
- `scripts/20_import_historical_kokudo_data.py`: 既存のインポートスクリプト
- `scripts/import_kokudo_multi_year_fixed.py`: 2018-2025年用インポートスクリプト

---

**作成日**: 2025年11月30日
**調査範囲**: 2000-2025年（26年分）





